{
  "module_name": "高塔序列研发系统",
  "研发规则": {
    "适用武器": "非传奇武器（含盾牌）",
    "序列类型": "特殊词缀",
    "研发流程": {
      "基础研发": {
        "芯片数量": 3,
        "可获序列": ["初阶", "中阶"],
        "消耗资源": {
          "初火源质": 100,
          "基础元件": 10
        },
        "选择规则": {
          "总轮数": 3,
          "每轮规则": "从完整序列中随机给出2个选项供选择1个",
          "组合规则": "选择完毕后进行组合（不考虑顺序）"
        }
      },
      "深度研发": {
        "芯片数量": 4,
        "可获序列": ["初阶", "中阶", "高阶"],
        "消耗资源": {
          "初火源质": 500,
          "拓展元件": 10
        },
        "选择规则": {
          "总轮数": 4,
          "轮次详情": [
            {"轮次": 1, "规则": "3选1"},
            {"轮次": 2, "规则": "2选1"},
            {"轮次": 3, "规则": "2选1"},
            {"轮次": 4, "规则": "1选1"}
          ],
          "组合规则": "选择完毕后进行组合（不考虑顺序）"
        }
      }
    },
    "成功条件": "最终芯片颜色组合（顺序不限）与目标序列一致",
    "失败惩罚": "随机获得一条初阶序列",
    "研发限制": "每件武器仅可绑定一条序列，可重复研发直至成功"
  },
  "武器类型配置": [
    "法杖", "灵杖", "魔杖", "手杖", "锡杖", "武杖",
    "剑", "斧", "锤", "爪", "匕首",
    "手枪", "弓", "弩", "炮", "火枪",
    "盾"
  ],
  "元件类型映射": {
    "基础元件": "所有武器通用",
    "拓展元件-术士": ["法杖", "灵杖", "魔杖", "手杖", "锡杖", "武杖"],
    "拓展元件-近卫": ["剑", "斧", "锤", "爪", "匕首"],
    "拓展元件-狙击": ["手枪", "弓", "弩", "炮", "火枪"],
    "拓展元件-重装": ["盾"]
  },
  "用户界面配置": {
    "输入字段": [
      {
        "name": "weapon_type",
        "type": "dropdown",
        "options": "武器类型配置列表",
        "label": "选择武器类型"
      },
      {
        "name": "research_type",
        "type": "radio",
        "options": ["基础研发", "深度研发"],
        "label": "研发类型"
      },
      {
        "name": "target_sequence",
        "type": "input",
        "format": "数字序列（基础3位/深度4位，范围1-7）",
        "label": "目标序列"
      },
      {
        "name": "material_prices",
        "type": "number_input_group",
        "fields": [
          { "label": "基础元件价格", "key": "base_price" },
          { "label": "拓展元件-术士价格", "key": "warlock_price" },
          { "label": "拓展元件-近卫价格", "key": "guard_price" },
          { "label": "拓展元件-狙击价格", "key": "sniper_price" },
          { "label": "拓展元件-重装价格", "key": "defense_price" }
        ],
        "persist": true
      }
    ],
    "输出字段": [
      { "name": "required_materials", "label": "所需材料清单" },
      { "name": "success_prob", "label": "研发成功率" },
      { "name": "expected_cost", "label": "期望成本（初火源质）" }
    ],
    "计算按钮": {
      "label": "计算研发数据",
      "action": "触发概率与成本计算"
    }
  },
  "计算逻辑": {
    "材料清单生成": {
      "逻辑": "根据武器类型和研发类型动态匹配元件类型及数量",
      "示例": "选择"盾"+"深度研发" → 输出：{初火源质:500, 拓展元件-重装:10}"
    },
    "研发成功率": {
      "公式": "success_prob = 1 / (7 ^ n)  // n=芯片数（基础3/深度4）",
      "示例": "基础研发成功率 = 1/343 ≈ 0.29%"
    },
    "期望成本": {
      "公式": "expected_cost = (单次成本) / success_prob",
      "单次成本": "初火源质消耗 + ∑(元件单价×数量)",
      "示例": "深度研发（盾）：单次成本 = 500 + 10×重装元件单价 → 期望成本 = 单次成本 / (1/2401)"
    }
  }
}